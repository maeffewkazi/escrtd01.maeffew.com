/* ! speed-kit 2.4.1 | Copyright (c) 2020 Baqend GmbH */
"use strict";const e="accept",t=`${e}-language`,s="content-language",i="content-type";function r(e){const t=e.lastIndexOf(".");return-1===t||e.lastIndexOf("/")>t?"":e.substr(t).toLowerCase()}var n;function a(t){if("navigate"===t.mode)return n.Navigate;const s=function(e){for(const t of Object.values(n))if(t===e)return t;return n.Undefined}(t.destination||"");if(s!==n.Undefined)return t.url,s;if(function(e){return e.headers.has("X-Requested-With")&&"XMLHttpRequest"===e.headers.get("X-Requested-With")?n.Fetch:n.Undefined}(t)!==n.Undefined)return n.Fetch,t.url,n.Fetch;const i=function(e){const t=[];return e&&"*/*"!==e?((e.includes("text/html")||e.includes("application/xhtml+xml"))&&t.push(n.Document),e.includes("text/css")&&t.push(n.Style),(e.includes("text/javascript")||e.includes("application/javascript")||e.includes("application/wasm"))&&t.push(n.Script),e.includes("image/")&&t.push(n.Image),e.includes("font/")&&t.push(n.Font),e.includes("video/")&&t.push(n.Video),e.includes("audio/")&&t.push(n.Audio),e.includes("text/vtt")&&t.push(n.Track),1===t.length?t[0]:n.Undefined):n.Undefined}(t.headers.get(e)||"");if(i!==n.Undefined)return t.url,i;const{pathname:a}=new URL(t.url),o=function(e){switch(e){case".js":case".mjs":case".wasm":case".wast":return n.Script;case".html":case".htm":return n.Document;case".css":return n.Style;case".woff2":case".woff":case".ttf":case".otf":case".eot":return n.Font;case".mp3":case".wav":return n.Audio;case".vtt":return n.Track;case".pdf":return n.PDF;case".png":case".jpeg":case".jpg":case".gif":case".svg":case".ico":case".webp":return n.Image;case".mp4":case".ogg":case".ogv":case".webm":return n.Video;default:return n.Undefined}}(r(a));return o!==n.Undefined?(t.url,o):a.endsWith("/")?n.Document:n.Undefined}function o(e){const{userAgent:t}=navigator;return t.indexOf(`${e}/`)>-1}!function(e){e.Document="document",e.Navigate="navigate",e.Fetch="fetch",e.Audio="audio",e.Video="video",e.Track="track",e.PDF="pdf",e.Image="image",e.Style="style",e.Script="script",e.Font="font",e.Undefined="undefined"}(n||(n={}));const c=[n.Navigate,n.Document,n.Script,n.Style,n.Undefined];function h(e,t){const s=e.contentType,i=new URL(e.originalRequest.url);return(s!==n.Image||!o("Firefox"))&&(!t&&s===n.Script||!function(e,t){const{pathname:s}=e,i=".svg"===r(s);return c.includes(t)||i}(i,s))}function u(e,t){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&(s[i[r]]=e[i[r]])}return s}function l(e,t,s,i){var r,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,s,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(a=(n<3?r(a):n>3?r(t,s,a):r(t,s))||a);return n>3&&a&&Object.defineProperty(t,s,a),a}const d=new Map;class p{constructor(e,t){this.clientId=e,this.url=t}static fromClientID(e){const t=d.get(e);if(!t){const t=clients.get(e),s=new p(e,t.then(e=>e.url).catch(()=>""));return d.set(e,s),s}return t}static fromNavigateURL(e,t){const s=new p(t||"",e);return t&&d.set(t,s),s}}function g(e){return[].concat(e)}const m=[240,375,576,768,992,1200,1920,2560,3840];function f(e){return m.find(t=>e<=t)||e}function w(e){if(e.clientHintWidth)return new Map([["width",`${f(e.clientHintWidth)}`]]);if(!e.downscale)return new Map;if(e.maxHeight)return new Map([["height",`${e.maxHeight}`]]);const t=function(e){const{screenWidth:t,screenDPR:s}=e;return f(t*(s*(e.screenSizeFactor||1)))}(e),s=e.maxWidth?e.maxWidth:t;return isFinite(s)&&s>0?new Map([["width",`${s}`]]):new Map}function v(e){const t=w(e);return e.webp&&t.set("auto","webp"),null!==e.quality&&100!==e.quality&&t.set("quality",`${e.quality}`),null===e.quality&&e.optimize&&t.set("optimize",`${e.optimize}`),e.pjpeg&&e.pathname.match(/\.jpe?g$/i)&&t.set("format","pjpeg"),function(e,t){const s=t.crop;if(s)if("string"==typeof s)e.set("crop",`${s},smart`);else if(s instanceof Array)if(s.length>=4){const[t,i,r,n]=s;e.set("crop",`${r},${n},x${t},y${i}`)}else if(s.length>=2){const[t,i]=s;e.set("crop",`${t},${i},smart`)}}(t,e),function(e,t){if(!1!==t.overrideWidth)for(const s of g(t.overrideWidth)){const i=t.searchParams.get(s);if(i&&!Number.isNaN(+i)){e.delete("height"),e.set("width",String(+i));break}}}(t,e),function(e,t){if(!1!==t.overrideHeight)for(const s of g(t.overrideHeight)){const i=t.searchParams.get(s);if(i&&!Number.isNaN(+i)){e.delete("width"),e.set("height",String(+i));break}}}(t,e),[...t].map(e=>e.join("="))}function y(e,t){const{url:s}=e,i=s.search.split(/[?&]/).filter(e=>e&&!e.includes("="));for(const e of i)t.search=t.search.replace(`${e}=`,e)}function C(e,t){const s=3&t.length,i=t.length-s,r=3432918353,n=461845907;let a,o,c,h;for(a=e,h=0;h<i;)c=255&t.charCodeAt(h)|(255&t.charCodeAt(h+=1))<<8|(255&t.charCodeAt(h+=1))<<16|(255&t.charCodeAt(h+=1))<<24,h+=1,a=27492+(65535&(o=5*(65535&(a=(a^=c=(65535&(c=(c=(65535&c)*r+(((c>>>16)*r&65535)<<16)&4294967295)<<15|c>>>17))*n+(((c>>>16)*n&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(c=0,s){case 3:c^=(255&t.charCodeAt(h+2))<<16;case 2:c^=(255&t.charCodeAt(h+1))<<8;case 1:a^=c=(65535&(c=(c=(65535&(c^=255&t.charCodeAt(h)))*r+(((c>>>16)*r&65535)<<16)&4294967295)<<15|c>>>17))*n+(((c>>>16)*n&65535)<<16)&4294967295}return a^=t.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}function S(e){const t=Array.from(e).map(e=>String.fromCharCode(e)).join("");return btoa(t).replace(/(?:A(?:AAA|AA=|A==))+$/,"")}class b{constructor(e,t,s){this.A8=e,this.A9=t,this.A$=s}static fromJSON(e){return new b((t=e.b,Uint8Array.from([...atob(t)].map(e=>e.charCodeAt(0)))),e.m,e.h);var t}contains(e){return this.A6(e).every(e=>this.A7(e))}toJSON(){return{b:S(this.A8),m:this.A9,h:this.A$}}A6(e){const t=[],s=C(0,e),i=C(s,e);for(let e=0;e<this.A$;e+=1)t[e]=(s+e*i)%this.A9;return t}A7(e){const t=this.A8[e>>3];if(t){return 0!=(t&1<<(7&e))}return!1}}var R;!function(e){e[e.OK=200]="OK",e[e.NoContent=204]="NoContent",e[e.BaqendRedirect=231]="BaqendRedirect",e[e.MovedPermanently=301]="MovedPermanently",e[e.MovedTemporarily=302]="MovedTemporarily",e[e.NotModified=304]="NotModified",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.CORSRedirect=357]="CORSRedirect",e[e.BadRequest=400]="BadRequest",e[e.Forbidden=403]="Forbidden",e[e.InternalServerError=500]="InternalServerError",e[e.BadGateway=502]="BadGateway",e[e.FetchTypeError=542]="FetchTypeError"}(R||(R={}));const A="baqend-speedkit",B=`${A}-store`,k="/com.baqend.speedkit.config",D="baqend-speed-kit",q="baqend-sw-control",O="bqpassthrough",N="bqpreloadrequest",x="init-cache";function I(e){const t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];let s=null;if(/trident/i.test(t[1]))return s=/\brv[ :]+(\d+)/g.exec(e)||[],["IE",parseInt(s[1],10)||0];const i=function(e){if(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)/.test(e)){const t=e.match(/(OS |os |OS)(\d+)/i)||[];return["SafariWebView",parseInt(t[2],10)||0]}return null}(e)||function(e,t){if("Chrome"===t[1]){let t=null;if(null!=(t=e.match(/\bEdg\/(\d+)/)||e.match(/\bEdge\/(\d+)/)))return["Edge",parseInt(t[1],10)];if(null!=(t=e.match(/\bOPR\/(\d+)/)))return["Opera",parseInt(t[1],10)]}return null}(e,t);if(null!==i)return i;const r=t[2]?[t[1],parseInt(t[2],10)]:[navigator.appName,parseInt(navigator.appVersion,10)];return-1===e.indexOf("Android")&&null!=(s=e.match(/version\/(\d+)/i))&&r.splice(1,1,parseInt(s[1],10)),r}function P(e){return new Promise(t=>setTimeout(t,e))}function F(e){const[t]=I(navigator.userAgent);return"Safari"===t?async function e(t){const s=Date.now();if(t<10)return;if(t<500)return P(t);await P(500);const i=Date.now()-s;return e(t-i)}(e):P(e)}function E(e){const t=e.headers.get("date")||"";return Date.parse(t)}class U{constructor(e){this.public=e.has("public"),this.private=e.has("private"),this.noCache=e.has("no-cache"),this.onlyIfCached=e.has("only-if-cached"),this.maxAge=e.get("max-age"),this.swMaxAge=e.get("sw-max-age"),this.maxStale=e.get("max-stale"),this.minFresh=e.get("min-fresh"),this.staleWhileRevalidate=e.get("stale-while-revalidate"),this.staleIfError=e.get("stale-if-error"),this.mustRevalidate=e.has("must-revalidate"),this.proxyRevalidate=e.has("proxy-revalidate"),this.immutable=e.has("immutable"),this.noStore=e.has("no-store"),this.noTransform=e.has("no-transform")}static fromString(e){const t=e.split(/,\s*/).map(e=>e.split("=",2)).map(([e,t])=>[e,t?parseInt(t,10):-1]),s=new Map(t);return new U(s)}}function L(e,t){return U.fromString(e.headers.get(t)||"")}function H(e,t){const s=L(e,"cache-control"),i=L(e,q),r=function(...e){for(const t of e)if(null!=t)return t;return null}(s.swMaxAge,i.maxAge,s.maxAge);if(e.headers.has("date")&&null!=r){const s=function(e,t,s=0){const i=e.headers.get(t);return null==i?s:parseInt(i,10)}(e,"age"),i=E(e)+t,n=(new Date(i-t),i+1e3*(r-s));return Date.now(),Date.now()>n}return null}var M,T,J;!function(e){e.SWException="SWException",e.BloomfilterException="BloomfilterException",e.DashboardDisabled="DashboardDisabled",e.ServerError="ServerError",e.None="None"}(M||(M={}));function $(e){const[,t,s,i,r,n,a]=/^(?:(https?:)\/\/)?(([\w.-]+)(?::(\d+))?)([^#]*)(#.*)?$/.exec(e);return{protocol:t,host:s,hostname:i,port:r,pathname:n,hash:a}}function W(e){const t=new URL(e);return t.hash&&(t.hash=""),function(e){const t=Array.from(e.entries()).sort((e,t)=>e[0]===t[0]?e[1]<t[1]?-1:1:e[0]<t[0]?-1:1);t.forEach(t=>e.delete(t[0])),t.forEach(t=>e.append(t[0],t[1]))}(t.searchParams),t.toString()}function j(e){return function(e){const[,t]=/^(?:(?:\w+?:)?\/\/)?(.*)$/.exec(e);return t}(function(e){const t=new URL(e);return t.hash&&(t.hash=""),t.toString()}(e))}!function(e){e.Blacklist="Blacklist",e.CacheHit="CacheHit",e.ClientError="ClientError",e.CORSRedirect="CORSRedirect",e.CriticalResource="CriticalResource",e.Delayed="Delayed",e.Disabled="Disabled",e.Disconnected="Disconnected",e.DynamicBlock="DynamicBlock",e.DynamicBlockPreload="DynamicBlockPreload",e.Error="Error",e.Fallback="Fallback",e.Fetchlist="Fetchlist",e.FirstLoad="FirstLoad",e.GroupChange="GroupChange",e.IgnoredAfterPOSTNavigate="IgnoredAfterPOSTNavigate",e.InternalServerError="InternalServerError",e.LoopDetected="LoopDetected",e.NavigationPreload="NavigationPreload",e.NonSKGroup="NonSKGroup",e.NoSwInstalled="NoSwInstalled",e.NoSwResponse="NoSwResponse",e.Offline="Offline",e.Onboarding="Onboarding",e.SafeScript="SafeScript",e.SwFailed="SwFailed",e.SwUnsupported="SwUnsupported",e.Unknown="Unknown",e.Immutable="Immutable"}(T||(T={})),function(e){e.CacheMiss="CacheMiss",e.ExpiredResponse="ExpiredResponse",e.InvalidCacheSketch="InvalidCacheSketch",e.ReloadCacheMode="ReloadCacheMode",e.UrlInCacheSketch="UrlInCacheSketch"}(J||(J={}));class z{constructor(e,t){this.urls=e,this.contentTypes=t,this.urlRegExp=function(e){const t=[];if(e&&t.push(...[...e].map(e=>`^${function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(e).replace(/\\\*/g,".*")}$`)),t.length)return new RegExp(t.join("|"))}(e)}static fromJSON(e){const t=e=>{if(e&&e.length)return new Set(e)};return new z(t(e.urls),t(e.contentTypes))}match(e,t){let s=this.doesContentTypeMatch(t);return this.urlRegExp&&(s=s&&!!e.match(this.urlRegExp)),s}toJSON(){const e=e=>{if(e)return[...e]};return{urls:e(this.urls),contentTypes:e(this.contentTypes)}}doesContentTypeMatch(e){const t=e===n.Undefined,s=e===n.Navigate;return!(this.contentTypes&&!t)||(s?this.contentTypes.has(n.Document)||this.contentTypes.has(n.Navigate):this.contentTypes.has(e))}}function G(e){return function(t){return class extends t{async handle(t,s,i){if(!this.Fu(s))return!1;const{type:r}=s,n=u(s,["type"]);return e===r&&super.handle(t,n,i)}Fu(e){return!!e&&"object"==typeof e&&"string"==typeof e.type}}}}function K(e){return function(t){return class extends t{cachePath(){return e}}}}function*V(e,t){for(const s of e)yield*t(s)}class Q{constructor(e){if(this[Symbol.toStringTag]="MultiMap",this.Fp=new Map,e)for(const[t,s]of e)this.Fp.has(t)?this.Fp.get(t).add(s):this.Fp.set(t,new Set([s]))}get size(){return e=this.values(),[...e].length;var e}[Symbol.iterator](){return this.entries()}entries(){return V(this.Fp.entries(),([e,t])=>(function*(e,t){for(const s of e)yield t(s)})(t,t=>[e,t]))}keys(){return this.Fp.keys()}values(){return V(this.Fp.values(),e=>e.keys())}clear(){this.Fp.clear()}delete(e){return this.Fp.delete(e)}forEach(e,t){for(const[s,i]of this.entries())e.call(t,i,s,this)}map(e,t){return new Q([...this.entries()].map(([s,i])=>e.call(t,i,s,this)))}filter(e,t){return new Q([...this.entries()].filter(([s,i])=>e.call(t,i,s,this)))}filterKey(e,t){return new Q([...this.entries()].filter(([s])=>e.call(t,s,this)))}getAll(e){const t=this.Fp.get(e);if(!t){const t=new Set;return this.Fp.set(e,t),t}return t}get(e){return function(e){const[t]=e;return t}(this.getAll(e))}has(e){return this.Fp.has(e)}add(e,t){return this.getAll(e).add(t),this}set(e,t){const s=this.getAll(e);return s.clear(),s.add(t),this}setAll(e,t){const s=this.getAll(e);s.clear();for(const e of t)s.add(e);return this}}class _{constructor(){this.C_=[]}observe(e){this.C_.push(e)}notify(){for(const e of this.C_)e()}}let X=class extends _{constructor(e){super(),this.revalidationWhitelist=new Set,this.refreshJobs=new Q,this.C4=0,this.C5="default",this.C6=null,this.C3=e}addToRevalidationWhitelist(e){this.revalidationWhitelist.add(e)}clearRevalidationWhitelist(){this.revalidationWhitelist.clear()}isExpired(){return null==this.maxAge||this.maxAge<Date.now()}isInvalid(){if(null==this.maxAge)return!0;const e=this.C3.staleWhileRevalidate,t=this.maxAge+e<=Date.now();return this.maxAge,Date.now(),t}isRequestStale(e){return!this.revalidationWhitelist.has(e)&&(!this.bloomFilter||this.bloomFilter.contains(e))}isResponseStale(e,t,s){const i=E(s),r=this.refreshJobs.filterKey(e=>e.getTime()>=i);for(const s of r.values())if(s.match(e,t))return JSON.stringify(s.toJSON()),!0;return!1}getDrift(){return this.C4}getClientRevision(){return this.C5}getServerRevision(){return this.C6}update(e){void 0!==e.body&&this.C2(e.body),void 0!==e.maxAge&&(this.maxAge=e.maxAge),void 0!==e.drift&&(this.C4=e.drift),void 0!==e.clientRevision&&(this.C5=e.clientRevision),void 0!==e.serverRevision&&(this.C6=e.serverRevision),this.notify()}purge(){this.bloomFilter=void 0,this.maxAge=void 0,this.revalidationWhitelist.clear(),this.notify()}toJSON(){return{maxAge:this.maxAge,body:this.C0(),drift:this.C4,clientRevision:this.C5,serverRevision:this.C6}}fromJSON(e){this.C4=e.drift,this.C2(e.body),e.maxAge&&(this.maxAge=e.maxAge),void 0!==e.clientRevision&&(this.C5=e.clientRevision),void 0!==e.serverRevision&&(this.C6=e.serverRevision)}C0(){if(!this.bloomFilter)return;const e=this.C1();return Object.assign({},this.bloomFilter.toJSON(),{r:e})}C1(){if(this.refreshJobs.size)return[...this.refreshJobs.map((e,t)=>[t.getTime(),e.toJSON()])]}C2(e){if(this.refreshJobs.clear(),e&&(this.bloomFilter=b.fromJSON(e),e.r))for(const[t,s]of e.r)this.refreshJobs.add(new Date(t),z.fromJSON(s))}};X=l([K("/com.baqend.speedkit.clock")],X);class Z{constructor(e=""){this.Cx=new Map,e&&this.fromString(e)}clear(){this.Cx.clear()}fromString(e){this.clear();const t=e.trim();if(!t)return;const s=t.split(/\s*;\s+/);for(const e of s){const[t,s]=e.split(/\s*=\s*/,2);this.Cx.set(t,s)}}toString(){return[...this.Cx].map(([e,t])=>`${e}=${t}`).join("; ")}getItem(e){return this.Cx.get(e)}keys(){return this.Cx.keys()}entries(){return this.Cx.entries()}getMap(){return this.Cx}}let Y=class extends _{constructor(){super(),this.C7=new Map}getCookies(e){return this.C7.get(e)||new Z}updateCookies(e,t){this.C7.set(e,new Z(t)),this.notify()}toJSON(){return{origins:[...this.C7].map(([e,t])=>[e,t.toString()])}}fromJSON(e){if("string"==typeof e)return this.fromJSON({origins:[[location.origin,e]]}),void this.notify();const{origins:t}=e;this.C7.clear();for(const[e,s]of t)this.C7.set(e,new Z(s));this.C7}};function ee(e){if("string"!=typeof e)return null;const t=/^regexp:\/(.*)\/([\w]*)$/.exec(e);if(t){const[,e,s]=t;return new RegExp(e,s)}return null}function te(e){return JSON.parse(e,(e,t)=>"string"==typeof t&&ee(t)||t)}Y=l([K("/com.baqend.speedkit.cookie")],Y);let se=class extends _{constructor(){super(...arguments),this.count=1}getAndResetCount(){const e=this.count;return this.count=0,this.notify(),e}increment(){this.count+=1,this.notify()}fromJSON(e){this.count=e.count||1}toJSON(){return{count:this.count}}};se=l([K("/com.baqend.speedkit.pi")],se);let ie=class extends _{constructor(){super(...arguments),this.dpr=1,this.width=1/0}fromJSON(e){this.dpr=e.dpr||1,this.width=e.width||1/0}toJSON(){return{dpr:this.dpr,width:this.width}}};function re(e,...t){const s=e.toLowerCase();return t.some(e=>"string"==typeof e?s.includes(e):e.test(s))}ie=l([K("/com.baqend.speedkit.screen")],ie);const ne=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(?:browser|link)|vodafone|wap|windows ce|xda|xiino/,ae=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br[ev]w|bumb|bw\-[nu]|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c[- ]|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/;function oe(e){return re(e,"tablet","ipad","nexus 7","nexus 10","silk/",/\bgt-[pn]\d{4}\b/,/\bsm-t\d{3}\b/,/^.*android(?!.*mobile|.*smart-tv|.*smarttv|.*aft[tm]|.*crkey).*$/)}function ce(e){return re(e,"appletv","apple tv","googletv","crkey","armv7l","aftt","aftm","roku","bravia","philipstv","tsbnettv","smarttv","smart-tv",/\btv\b/)}function he(e,t){if(!t)return e.toString();try{return new URL(t).toString()}catch(s){if(t.startsWith("//"))return`${e.protocol}${t}`;if(t.startsWith("/"))return`${e.origin}${t}`;const i=function e(t){return t.startsWith("/")?e(t.substr(1)):t}(e.pathname).split("/"),r=t.split("/");i.pop();for(const e of r)".."===e?i.pop():"."===e||i.push(e);return`${e.origin}/${i.join("/")}`}}class ue{}ue.propName="";class le extends ue{constructor(e=[]){super(),this.Fv=e}matches(e,t){return!!this.Fv.length&&this.Fv.every(s=>s.matches(e,t))}toJSON(){const e={};for(const t of this.Fv){e[t.constructor.propName]=t.toJSON()}return e}fromJSON(e){if("string"==typeof e)return this.fromJSON(te(e));for(const[t,s]of Object.entries(e)){if(!ke[t])throw new Error(`Illegal rule: ${t}`);{const e=new ke[t];e.fromJSON(s),this.addCondition(e)}}return this}addCondition(e){return this.Fv.push(e)}removeCondition(e){const t=this.Fv.indexOf(e);return!(t<0)&&(this.Fv.splice(t,1),!0)}}function de(e,t){return t instanceof Array?t.some(t=>de(e,t)):t instanceof RegExp?t.test(e):e.toLowerCase().startsWith(t.toLowerCase())}class pe extends ue{constructor(e=[]){super(),this.Fw=e}matches(e,t){if(!this.Fw.length)return!1;const s=a(e);if(s===n.Navigate){const e=this.Fw.includes(s)||this.Fw.includes(n.Document);return e}const i=this.Fw.includes(s);return i}toJSON(){return this.Fw}fromJSON(e){if("string"==typeof e)return this.fromJSON(te(e));if(e instanceof Array)return this.Fw=e,this;throw new Error("Invalid ContentTypeCondition JSON")}}pe.propName="contentType";class ge extends ue{constructor(e){super(),this.F2=e}test(e){return null!=this.F2&&de(e,this.F2)}toJSON(){return this.F2?function e(t){return t instanceof Array?t.map(t=>e(t)):t instanceof RegExp?`regexp:/${(s=t).source}/${s.flags||""}`:t;var s}(this.F2):null}fromJSON(e){if(null==e||"null"===e)return this.F2=null,this;try{return this.fromJSON(te(e))}catch(e){}return this.F2=e,this}}class me extends ge{matches(e,t){if(!t)return!1;if(!e.url.startsWith(location.origin))return location.origin,!1;const s=[...t.entries()].some(e=>this.test(`${e[0]}=${e[1]}`));return s}}me.propName="cookie";class fe extends ue{matches(e,t){const s=e.headers.get("user-agent")||navigator.userAgent;return!s||(this.constructor.name,this.userAgentMatches(s),this.userAgentMatches(s))}toJSON(){return!0}fromJSON(e){return this}}class we extends fe{userAgentMatches(e){return function(e){return re(e,"wow64","windows nt","win64","msie","macintosh;","linux x86_64")}(e)}}we.propName="desktop";class ve extends ge{matches(e,t){return this.test($(e.url).host)}}ve.propName="host";class ye extends fe{userAgentMatches(e){return!(/\bsm-t\d{3}\b/i.test(e)||/\bgt-p\d{3}/i.test(e))&&(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|samsungbrowser|psp|series[46]0|symbian|treo|up\.(?:browser|link)|vodafone(?!.*tab)|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br[ev]w|bumb|bw\-[nu]|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c[- ]|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))}}ye.propName="mobile";class Ce extends ge{matches(e,t){return this.test($(e.url).pathname)}}Ce.propName="pathname";class Se extends ue{constructor(e=[]){super(),this.Fx=e}get size(){return this.Fx.length}toJSON(){return this.Fx.map(e=>e.toJSON())}fromJSON(e){if(e instanceof Array)return this.Fx=e.map(e=>(new le).fromJSON(e)),this;throw new Error("Invalid RuleSet JSON")}matches(e,t){return this.Fx.some(s=>s.matches(e,t))}[Symbol.iterator](){return this.Fx[Symbol.iterator]()}addRule(e){return this.Fx.push(e)}removeRule(e){const t=this.Fx.indexOf(e);return!(t<0)&&(this.Fx.splice(t,1),!0)}}class be extends fe{userAgentMatches(e){return oe(e)}}be.propName="tablet";class Re extends fe{userAgentMatches(e){return ce(e)}}Re.propName="tv";class Ae extends ge{matches(e,t){return this.test(j(e.url))}}Ae.propName="url";class Be extends ge{matches(e,t){return this.test($(e.url).hash||"")}}Be.propName="hashparam";const ke={[pe.propName]:pe,[me.propName]:me,[we.propName]:we,[ve.propName]:ve,[ye.propName]:ye,[Ce.propName]:Ce,[be.propName]:be,[Re.propName]:Re,[Ae.propName]:Ae,[Be.propName]:Be};var De,qe;function Oe(e,t){return e instanceof Promise?e.then(e=>t(e)):t(e)}function Ne(e,t){fetch(`${e}/db/speedKit.CustomEvent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).catch(e=>{})}function xe(e){return new Function(`return ${e}`)()}!function(e){e.LOAD="load",e.SPEED_KIT_DYNAMIC_LOADED="speed-kit-dynamic-loaded"}(De||(De={}));const Ie=2;let Pe=qe=class extends _{constructor(e){super(),this.DF=!0,this.DG=!1,this.DH=null,this.properties=qe.getDefaults(),this.DI=!1,this.DE=e}get appURL(){if(!this.optionalAppURL)throw new Error("Options are not initialized yet.");return this.optionalAppURL}get reconnectInterval(){return this.properties.reconnectInterval}get refreshInterval(){return 1e3*this.properties.refreshInterval}get relativeModuleImports(){return this.properties.relativeModuleImports}get staleWhileRevalidate(){return 1e3*this.properties.staleWhileRevalidate}get preloadBloomFilter(){return this.properties.preloadBloomFilter}get navigationPreload(){return this.properties.navigationPreload}get cachingDisabled(){return this.properties.disableCache}get preloadDynamicBlocks(){return this.properties.preloadDynamicBlocks}get ignoreAfterPostNavigate(){return this.properties.ignoreAfterPostNavigate}shouldCacheRequest(e,t=!1){const{request:s,cookies:i}=e;return this.DD(e),!e.modifying&&(!(e.url.hash.indexOf("bqBlacklist")>=0)&&(("navigate"!==e.request.mode||!this.properties.customDevice||!this.userAgentChangeDetected(e))&&(!this.properties.disableCache&&(!(this.properties.whitelist.size&&!this.properties.whitelist.matches(s,i))&&(!this.properties.blacklist.matches(s,i)&&(!(encodeURI(s.url).length>3800)&&(!!t||this.DF)))))))}shouldEnsureFetch(e){if(e.isDynamicBlockRequest()||e.isNavigateRequest())return!1;if(this.shouldDelayRequest(e))return!1;const t=(!this.properties.whitelist.size||this.properties.whitelist.matches(e.request,e.cookies))&&!e.modifying,s=this.properties.blacklist.matches(e.request,e.cookies),i=this.properties.fetchlist.matches(e.request,e.cookies);return!t&&!s||s&&i}shouldDelayRequest(e){const t=this.properties.delayed.some(t=>t.rules.matches(e.request,e.cookies)),s=a(e.request),i=[n.Script,n.Image];return t&&!!s&&i.includes(s)}isEnabledOnSite(e){return!!e.isNavigateRequest()||Oe(e.getNavigateUrl(),t=>0!==t.length&&this.DB(e,this.properties.enabledSites))}isEnabledOnURL(e,t,s=this.properties.enabledSites){if(this.isDisabledOnURL(e,t))return!1;if(!s.size)return!0;const i=s.matches(new Request(e),t);return i}isDisabledOnURL(e,t,s=this.properties.disabledSites){if(!s.size)return!1;const i=s.matches(new Request(e),t);return i}isImmutable(e,t=this.properties.immutableAssets){if(!t.size||e.isNavigateRequest())return!1;const{request:s,cookies:i}=e,r=t.matches(s,i);return s.url,r}shouldApplyUserAgentDetection(e){return this.properties.userAgentDetection&&this.properties.userAgentDetection.matches(e.originalRequest)}DA(e,t=this.properties.disabledSites){return!!t.size&&(e.isNavigateRequest()?t.matches(e.originalRequest,e.cookies):Oe(e.navigation.url,t=>this.isDisabledOnURL(t,e.cookies)))}DB(e,t){return Oe(this.DA(e),s=>!s&&(!t||!t.size||(e.isNavigateRequest()?t.matches(e.originalRequest,e.cookies):Oe(e.navigation.url,s=>this.isEnabledOnURL(s,e.cookies,t)))))}hasCustomVariation(){return!!this.properties.customVariation.length}getCustomVariation(e,t){const s=e.originalRequest;let i=null;return this.properties.customVariation.forEach(r=>{if(!r.rules||r.rules.matches(s))try{i=r.variationFunction(s,t,e.cookies.getMap())}catch(e){Ne(this.appURL,{action:"variationFunctionError",label:`${e}`,value:`${Date.now()}`})}}),i}updateCustomDevice(e){return this.properties.customDevice!==e&&(this.properties.customDevice=e,this.notify(),!0)}getCustomDevice(){return this.properties.customDevice}userAgentChangeDetected(e){const t=e.originalRequest.headers.get("user-agent")||navigator.userAgent||navigator.vendor;return this.DH?this.DH!==t&&(this.DH=t,!0):(this.DH=t,!1)}static getUAClass(e){return re(t=e,ne)||re(t.substr(0,4),ae)?"mobile":oe(e)?"tablet":ce(e)?"tv":"desktop";var t}static isCustomVariation(e){return!["desktop","mobile","tablet","tv"].includes(e)}async shouldFetchOrigin(e){if(-1===this.properties.fetchOriginInterval)return!1;if(0===this.properties.fetchOriginInterval)return!0;const t=Math.floor(Date.now()/1e3);if((await this.DE.get("/fetch-origin-time")||t)<=t){const e=t+this.properties.fetchOriginInterval+Ie;return await this.DE.set("/fetch-origin-time",e),!0}return!1}getDelayOptions(e){const t=qe.getDelayDefaults();for(const s of this.properties.delayed){(!s.rules||s.rules.matches(e.originalRequest))&&(s.options,Object.assign(t,s.options))}return t}shouldDefer(e){return this.properties.defer.matches(e.originalRequest)}async getImageOptions(e){if(!1===this.properties.image)return!1;const t=qe.getImageDefaults();if(this.properties.image instanceof Array){for(const s of this.properties.image){if(!s.rules||s.rules.matches(e.originalRequest)){await this.DB(e,s.enabledSites)&&(s.options,Object.assign(t,s.options))}}return t}return Object.assign(t,this.properties.image)}shouldStripQueryParameter(e,t){return!!this.properties.stripQueryParams.length&&de(e,t)}async getQueryParameterStripConditions(e){let t=[];for(const s of this.properties.stripQueryParams){if(!s.rules||s.rules.matches(e.originalRequest)){(!s.enabledSites||await this.DB(e,s.enabledSites))&&(t=t.concat(s.params))}}return t}async appendStrippedParams(e,t){const s=new URL(t.originalRequest.url),i=await this.getQueryParameterStripConditions(t);return s.searchParams.forEach((t,s)=>{this.shouldStripQueryParameter(s,i)&&e.searchParams.append(s,t)}),e.toString()}hasCriticalResources(){return!!this.properties.criticalResources.length}getRequestKey(e){const t=W(e.originalRequest.url);return"navigate"===e.originalRequest.mode?(this.DG=!!e.resultingClientId,e.resultingClientId||t):this.DG?e.navigation.clientId:t}supportsId(){return this.DG}toggleBypassDeactivation(e){this.DI=e}shouldBypassDeactivation(){return this.DI}async getCriticalResources(e){const t=[];for(const{enabledOn:s,resources:i}of this.properties.criticalResources)await this.DB(e,s)&&t.push(...i);return t.filter((e,s)=>t.indexOf(e)===s)}getPrecache(){return this.properties.precache}getSplitTestId(){return this.properties.splitTestId}getGroup(){return this.properties.group}toJSON(){const e=this.properties.delayed.map(e=>({options:e.options,rules:e.rules.toJSON()})),t=this.properties.image instanceof Array?this.properties.image.map(e=>({options:e.options,enabledSites:e.enabledSites&&e.enabledSites.toJSON(),rules:e.rules&&e.rules.toJSON()})):this.properties.image,s=this.properties.criticalResources.map(e=>({enabledOn:e.enabledOn&&e.enabledOn.toJSON(),resources:e.resources})),i=this.properties.stripQueryParams.map(e=>({enabledSites:e.enabledSites&&e.enabledSites.toJSON(),rules:e.rules&&e.rules.toJSON(),params:e.params})),r=this.properties.customVariation.map(e=>({rules:e.rules&&e.rules.toJSON(),variationFunction:e.variationFunction.toString()})),n=new URL(this.appURL);let a,o="local";return n.host.endsWith(".app.baqend.com")?o=n.host.substring(n.host.length-".app.baqend.com".length):a=n.host,{appName:o,appDomain:a,delayed:e,image:t,criticalResources:s,stripQueryParams:i,customVariation:r,defer:this.properties.defer.toJSON(),splitTestId:this.properties.splitTestId,group:this.properties.group,blacklist:this.properties.blacklist.toJSON(),whitelist:this.properties.whitelist.toJSON(),enabledSites:this.properties.enabledSites.toJSON(),disabledSites:this.properties.disabledSites.toJSON(),disableCache:this.properties.disableCache,ignoreAfterPostNavigate:this.properties.ignoreAfterPostNavigate,userAgentDetection:this.properties.userAgentDetection.toJSON(),fetchOriginInterval:this.properties.fetchOriginInterval,preloadBloomFilter:this.properties.preloadBloomFilter,navigationPreload:this.properties.navigationPreload,reconnectInterval:this.properties.reconnectInterval,refreshInterval:this.properties.refreshInterval,staleWhileRevalidate:this.properties.staleWhileRevalidate,customDevice:this.properties.customDevice,precache:this.properties.precache,immutableAssets:this.properties.immutableAssets.toJSON()}}fromJSON(e){const{sw:t,scope:s,disabled:i}=e,r=u(e,["sw","scope","disabled"]),{appName:n,appDomain:a}=r,o=u(r,["appName","appDomain"]),c=`${n}.app.baqend.com`;this.optionalAppURL=`https://${a||c}/v1`,this.optionalAppURL;const h=qe.getDefaults(),{maxStaleness:l,refreshInterval:d}=o,p=u(o,["maxStaleness","refreshInterval"]),g=d||l&&l/1e3||h.refreshInterval,{whitelist:m,blacklist:f,fetchlist:w,delayed:v,defer:y,stripQueryParams:C,customVariation:S,enabledSites:b,disabledSites:R,criticalResources:A,precache:B,image:k,userAgentDetection:D,customDevice:q,immutableAssets:O}=p,N=u(p,["whitelist","blacklist","fetchlist","delayed","defer","stripQueryParams","customVariation","enabledSites","disabledSites","criticalResources","precache","image","userAgentDetection","customDevice","immutableAssets"]);this.properties=Object.assign({},h,{refreshInterval:g,customDevice:q||"",userAgentDetection:this.getUserAgentRuleSet(D||!1),whitelist:(new Se).fromJSON(m||[]),blacklist:(new Se).fromJSON(f||[]),fetchlist:(new Se).fromJSON(w||[]),immutableAssets:(new Se).fromJSON(O||[]),enabledSites:(new Se).fromJSON(b||[]),disabledSites:(new Se).fromJSON(R||[]),stripQueryParams:qe.initStripParams(C),customVariation:this.DC(S),delayed:qe.initDelayed(v),defer:(new Se).fromJSON(y||[]),criticalResources:qe.initCriticalResources(A),precache:B||[],image:qe.initImage(k)},N)}getUserAgentRuleSet(e){const t=new Se;return"boolean"==typeof e?e&&t.addRule(new le([new Ae("")])):t.fromJSON(e),t}static getDefaults(){return{blacklist:new Se,criticalResources:[],delayed:[{rules:new Se,options:this.getDelayDefaults()}],defer:new Se,disableCache:!1,enabledSites:new Se,disabledSites:new Se,fetchOriginInterval:-1,image:this.getImageDefaults(),ignoreAfterPostNavigate:!0,preloadBloomFilter:!0,preloadDynamicBlocks:!1,navigationPreload:!1,reconnectInterval:6e4,refreshInterval:300,relativeModuleImports:!1,staleWhileRevalidate:1800,stripQueryParams:[],userAgentDetection:new Se,customVariation:[],whitelist:new Se,fetchlist:new Se,splitTestId:"",group:"",customDevice:"",precache:[],immutableAssets:new Se}}static getDelayDefaults(){return{event:De.LOAD,timeout:1e3}}static getImageDefaults(){return{downscale:!0,screenSizeFactor:1,maxWidth:!1,maxHeight:!1,quality:null,optimize:"medium",webp:!0,pjpeg:!0,crop:!1,overrideWidth:!1,overrideHeight:!1}}static initDelayed(e){return e?e.some(e=>e.hasOwnProperty("rules"))?e.map(e=>({rules:(new Se).fromJSON(e.rules),options:e.options})).reverse():[{rules:(new Se).fromJSON(e),options:this.getDelayDefaults()}]:[{rules:new Se,options:this.getDelayDefaults()}]}static initStripParams(e){if(!e)return[];return e instanceof Array&&e.some(e=>"object"==typeof e&&e.params)?e.map(e=>({enabledSites:e.enabledSites&&(new Se).fromJSON(e.enabledSites),rules:e.rules&&(new Se).fromJSON(e.rules),params:e.params})):[{params:e}]}DC(e){if(!e)return[];try{return e.map(e=>({rules:e.rules&&(new Se).fromJSON(e.rules),variationFunction:xe("string"==typeof e.variationFunction?e.variationFunction:e.variationFunction.toString())}))}catch(e){try{Ne(this.appURL,{action:"variationParseError",label:`${e.error}`,value:`${Date.now()}`})}catch(e){}return[]}}DD(e){if(!e.isNavigateRequest())return;const{request:t,cookies:s}=e;this.properties.disabledSites.size&&this.properties.disabledSites.matches(t,s)?this.DF=!1:this.properties.enabledSites.size?this.DF=this.properties.enabledSites.matches(t,s):this.DF=!0}static initImage(e){return!1!==e&&(e?e instanceof Array?e.map(e=>({enabledSites:e.enabledSites&&(new Se).fromJSON(e.enabledSites),rules:e.rules&&(new Se).fromJSON(e.rules),options:qe.normalizeImageOptions(e.options)})).reverse():qe.normalizeImageOptions(e):{})}static normalizeImageOptions(e){return"number"==typeof e.quality?e.quality=Math.max(1,Math.min(100,Math.round(e.quality))):!1===e.quality&&(e.quality=100),e}static initCriticalResources(e=[]){return e.length?e.map(qe.makeResourceRule).map(qe.normalizeResourceURLs).map(qe.instantiateResourceEnabledOn):[]}static makeResourceRule(e){return"string"==typeof e?{resources:[e]}:e}static normalizeResourceURLs({enabledOn:e,resources:t}){const s=new URL(location.href);return{enabledOn:e,resources:t.map(e=>he(s,e))}}static instantiateResourceEnabledOn({enabledOn:e,resources:t}){return{enabledOn:e&&(new Se).fromJSON(e),resources:t}}};function Fe(e,t){return void 0===e?t:e}Pe=qe=l([K(k)],Pe);class Ee{constructor(e){this.isFetched=!1,this.Au=null,this.Av=null,this.dependent=new Set,this.originalRequest=e.request,this.request=e.request,this.Az=e.awaiter,this.navigation=e.navigation,this.cookies=Fe(e.cookies,new Z),this.Aw=e.navigateRequest,this.Ax=Fe(e.critical,!1),this.Ay=Fe(e.precache,!1),this.preloadResponse=e.preloadResponse,this.prewarm=Fe(e.prewarm,!1),this.marks=Fe(e.marks,new Map),this.dependsOn=e.dependsOn,this.resultingClientId=Fe(e.resultingClientId,""),this.contentType=e.contentType,this.Av=e.userAgent}static create(e,t={},s=(()=>{})){const i=p.fromNavigateURL(e),{navigation:r=i,cookies:n=new Z,critical:o=!1,precache:c=!1}=t,h=u(t,["navigation","cookies","critical","precache"]),l=h.headers?h.headers.get("user-agent"):null,d=new Request(e,h),g="navigate"===t.mode,m=a(d);return new Ee({request:d,navigation:r,cookies:n,critical:o,precache:c,navigateRequest:g,contentType:m,userAgent:l,awaiter:s,prewarm:t.prewarm,marks:t.marks,dependsOn:t.dependsOn,resultingClientId:t.resultingClientId})}static fromEvent(e){const{request:t,preloadResponse:s,resultingClientId:i}=e,r="navigate"===t.mode,n=r?p.fromNavigateURL(t.url,i):p.fromClientID(e.clientId),o=a(t),c=t.headers.get("user-agent");return new Ee({request:t,awaiter:t=>e.waitUntil(t),navigation:n,navigateRequest:r,contentType:o,preloadResponse:s,resultingClientId:i,userAgent:c})}createSubRequest(e,t){return t.redirect||this.request.redirect,Ee.create(e,Object.assign({marks:new Map(this.marks),resultingClientId:this.resultingClientId,redirect:this.request.redirect},t),this.Az)}waitUntil(...e){this.Az(Promise.all(e))}get url(){return new URL(this.request.url)}get headers(){return new Headers(this.request.headers)}get timings(){if(!this.marks.size)return null;const e=Object.create(null);for(const[t,s]of this.marks)e[t]=s;return e}mark(e){this.marks.set(e,Date.now())}isNavigateRequest(){return this.Aw}isCritical(){return this.Ax||this.Ay}isPrecache(){return this.Ay}isSameOrigin(){return this.url.origin===location.origin}isDynamicBlockRequest(){return"dynamic"===this.request.headers.get("baqend-speed-kit-request")}getCauseForCacheMiss(){return this.cacheMissCause?this.cacheMissCause:J.CacheMiss}get modifying(){return"GET"!==this.request.method&&"HEAD"!==this.request.method}set url(r){const n=r.toString();this.url.toString()!==n&&(this.request=function(r,n,a={}){const o=new Headers,c=[t,s,i];"navigate"!==r.mode&&c.push(e);for(const[e,t]of r.headers)c.includes(e.toLocaleLowerCase())&&o.append(e,t);const h={headers:o,credentials:"omit"};return"navigate"!==r.mode&&(h.mode=r.mode),new Request(n,Object.assign(h,a))}(this.request,n))}set headers(e){this.request=new Request(this.request,{headers:e})}set method(e){this.method!==e&&(this.request=new Request(this.request,{method:e}))}get method(){return this.request.method.toUpperCase()}set mode(e){this.request.mode!==e&&(this.request=new Request(this.request,{mode:e}))}set cache(e){this.request.cache!==e&&(this.request=new Request(this.request,{cache:e}))}markAsCacheMiss(e){this.cacheMissCause=e}markAsFetched(){this.isFetched=!0;for(const e of this.dependent)this.dependent.delete(e),e()}async fetch(){this.mark("fetchStart"),this.dependsOn&&(this.dependsOn,this.dependsOn.isFetched),this.dependsOn&&!this.dependsOn.isFetched&&await new Promise(e=>{this.dependsOn.dependent.add(e)}),this.method,this.url.pathname;const e=fetch(this.request);this.markAsFetched();const t=await e;return this.mark("fetchEnd"),t}getNavigateUrl(){return this.isNavigateRequest()?this.originalRequest.url:this.navigation.url}fetchOriginal(){return this.method,this.url.pathname,fetch(this.originalRequest)}toString(){return this.isSameOrigin()?`${this.method} ${this.url.pathname}`:`${this.method} ${this.url}`}getVariation(e){if(this.Au)return this.Au;const t=e.shouldApplyUserAgentDetection(this),s=e.getCustomDevice();if(!t&&!e.hasCustomVariation())return s||null;const i=this.Av||navigator.userAgent||navigator.vendor,r=Pe.getUAClass(i),n=e.getCustomVariation(this,s||r);return this.Au=n||s||(t?r:null)}}var Ue;const Le=Symbol("State"),He=Symbol("Reason"),Me=Symbol("Waiters");class Te{constructor(e="",t=""){this[Ue]=new Map,this[Le]=e,this[He]=t}get state(){return this[Le]}get reason(){return this[He]}waitUntil(...e){if(!e.length)throw new TypeError("You must wait for at least one desired state.");return e.indexOf(this.state)>=0?Promise.resolve(this.state):Promise.race(e.map(e=>this.As(e)))}transition(e,t){this[He]=t||"";const s=this[Le];return e===s?s:(this[Le]=e,this.At(e),s)}As(e){return new Promise(t=>{const s=this[Me].get(e)||[];s.push(t),this[Me].set(e,s)})}At(e){const t=this[Me].get(e)||[];this[Me].delete(e);for(const s of t)s(e)}}var Je,$e;function We(e){return e.includes("TypeError: Failed to fetch")}Ue=Me,function(e){e.INSTALLING="installing",e.RUNNING="running",e.FAILED="failed"}(Je||(Je={})),function(e){e.AssetAPI="AssetAPI",e.Shield="Shield",e.Storage="Storage",e.Edge="Edge",e.Collapsed="Collapsed",e.PendingAsset="PendingAsset",e.Stream="Stream",e.MissingCachingHeader="MissingCachingHeader",e.Generated="Generated",e.Origin="Origin",e.SwCache="SwCache"}($e||($e={}));function je(e,t,s,i){return Promise.resolve(e).then(e=>new Promise((r,n)=>{const a=e.transaction(t,s),o=Promise.resolve(i(a.objectStore(t)));a.oncomplete=(()=>o.then(r)),a.onabort=a.onerror=(()=>n(a.error))}))}function ze(e,t,s){return je(e,t,"readwrite",s)}async function Ge(e,t={}){if(e.status===R.NoContent)return new Response(null,t);const s=await e.blob();return new Response(s,t)}function Ke(e,t={}){const{status:s,statusText:i,headers:r}=e,n=new Headers(e.headers);n.set("timing-allow-origin","*");const a=Object.assign({status:s,statusText:i,headers:n},t);if(!e.body)return Ge(e,a);try{return Promise.resolve(new Response(e.body,a))}catch(t){return Ge(e,a)}}class Ve{constructor(e){this.Fe=null,this.pop=null,this.Ff=!1;const t=e.get("x-cache"),s=e.get("x-timer"),i=e.get("x-served-by");e.get("etag");this.Fg=$e.MissingCachingHeader,this.Fd="MISS",this.setPoP(i),this.interpreteXCacheHeader(t),this.setDuration(s),this.Fc(e)}getDuration(){return this.Fe}setDuration(e){if(!e)return void(this.Fe=null);const t=e.match(/VS(\d+).*VE(\d+)/);this.Fe=null!==t?+t[2]-+t[1]:null}interpreteXCacheHeader(e){if(!e)return;const t=e.split(", ").reverse();if("HIT"===t[0])return this.Fd="HIT",void(this.Fg=$e.Edge);const s=t.find(e=>"MISS"!==e);if("HIT"===s)return this.Fd="SHIELD HIT",void(this.Fg=$e.Shield);var i;s?this.Fg=$e[(i=s,i.split(/[ _-]/).filter(e=>!!e.length).map(e=>`${e.charAt(0).toUpperCase()}${e.slice(1).toLowerCase()}`).join(""))]||$e.Origin:this.Fg=$e.Storage}getResponseSource(){return this.Fg}getCache(){return this.Fd}setPoP(e){if(!e)return;const t=e.match(/\w{3}$/);null!==t&&(this.pop=t[0])}getPoP(){return this.pop||null}isBackendCacheHit(){return this.Ff}Fc(e){this.Ff=e.has("etag")}}function Qe(e){return e.status>=R.MovedPermanently&&e.status<=R.PermanentRedirect&&e.status!==R.NotModified}class _e{constructor(e,t,s,i){this.request=s,this.response=i,this.cause=t,this.source=e,i&&e.toString()===$e.PendingAsset&&i.then(e=>{const t=new Ve(e.headers);this.source=t.getResponseSource()})}setDisconnectCause(e){this.disconnectCause=e}waitUntil(...e){this.request.waitUntil(...e)}clone(e){return new _e(this.source,this.cause,e,this.response&&this.response.then(e=>e.clone()))}async getResponseStatus(){if(!this.response)return null;return(await this.response).status}async wasRedirectedFromOrigin(){if(this.source!==$e.Origin||!this.response)return!1;const e=await this.response;return e.redirected||e.url!==this.request.originalRequest.url}async isRedirect(){if(!this.response)return!1;const e=await this.response;return"opaqueredirect"===e.type||Qe(e)}async isSuccessful(){return!!this.response&&!await this.isClientError()&&!await this.isServerError()}async isClientError(){if(!this.response)return this.cause===T.ClientError;try{if("opaqueredirect"===(await this.response).type)return!1;const e=await this.getResponseStatus();return!e||e>=R.BadRequest&&e<R.InternalServerError}catch(e){return this.disconnectCause=M.SWException,!1}}async isServerError(){if(!this.response)return this.cause===T.InternalServerError;try{const e=await this.getResponseStatus();return"opaqueredirect"!==(await this.response).type&&(!e||e>=R.InternalServerError||0===e)}catch(e){return this.disconnectCause=M.SWException,!0}}}function Xe(e,t,s,i){t&&e.markAsFetched();const r=i?Promise.resolve(i):void 0;return new _e($e.Origin,s,e,r)}function Ze(e,t,s,i){t&&e.markAsFetched();const r=i?Promise.resolve(i):void 0;return new _e($e.SwCache,s,e,r)}function Ye(e,t,s,i){t&&e.markAsFetched();const r=i?Promise.resolve(i):void 0;return new _e($e.PendingAsset,s,e,r)}function et(e,t,s={},i,r=$e.Generated){return e.markAsFetched(),new _e(r,i,e,Promise.resolve(new Response(t,s)))}function tt(e,t,s){e.markAsFetched();const i=new _e($e.Origin,T.Error,e,Promise.resolve(t));return i.setDisconnectCause(s),i}class st{}class it{constructor(e,t){this.J=e,this.K=t}async handleInternalServerError(e){return this.K.preloadDynamicBlocks?Ye(e,!0,T.InternalServerError):this.retryOrigin(e,!0)}async retryOrigin(e,t=!1){try{const s=await e.fetchOriginal();return s.status>=R.InternalServerError?tt(e,s,M.ServerError):t?(this.disconnect(M.ServerError),Xe(e,!0,T.Error,s)):Xe(e,!0,T.Error,s)}catch(t){const s=t instanceof TypeError?R.FetchTypeError:R.BadGateway;return tt(e,new Response(t.message,{status:s}),M.SWException)}}disconnect(e){this.J.isDisconnected()||this.J.disconnect(!0,e)}}class rt extends st{constructor(e,t){super(),this.Bp=e,this.Bq=t}handle(e,t){e.url;const s=this.Bp.getRequestKey(e),i=this.Bq.popDynamicBlockResponse(s);return i?this.Bo(e,i):Xe(e,!0,T.DynamicBlock)}supportsHandling(e){return e.isDynamicBlockRequest()}async Bo(e,t){const s=await t,i=await s.isRedirect();if(!i&&await s.isSuccessful())return s;if(i){const t=this.Bq.createDynamicBlockRequest(e,!0);if(await rt.isCorsRedirect(t)){const t=new Response(null,{status:R.CORSRedirect});return Xe(e,!1,T.CORSRedirect,t)}return t}return Xe(e,!0,T.DynamicBlock)}static async isCorsRedirect(e){try{return!await e.getResponseStatus()}catch(t){e.disconnectCause=M.SWException}return!0}}function nt(e){return e===$e.Edge||e===$e.AssetAPI||e===$e.Stream||e===$e.Collapsed||e===$e.Shield||e===$e.Storage||e===$e.PendingAsset||e===$e.MissingCachingHeader}function at(e){return nt(e.source)||e.source===$e.SwCache}function ot(e,t){const s=new Headers(t||e.originalRequest.headers);s.set("baqend-speed-kit-request","dynamic"),e.headers=s}class ct{constructor(){this.Fo=new Set}addRedirect(e,t){return!!this.Fm(t)||(this.Fn(e),!1)}Fm(e){const t=e.headers.get("location");return!!t&&this.Fo.has(t)}Fn(e){this.Fo.add(e.url)}clear(){this.Fo.clear()}}class ht{constructor(e){this.provider=e}}let ut=class extends ht{async handle(){return this.provider.connect(),!0}};ut=l([G("connect")],ut);let lt=class extends ht{async handle(){return this.provider.disconnect(!0,M.None,!0),!0}};lt=l([G("disconnect")],lt);let dt=class extends ht{async handle(){return await this.provider.refreshCacheSketch(!0),!0}};dt=l([G("fetch-bloom-filter")],dt);let pt=class{constructor(e,t){this.CN=e,this.CO=t}async handle(e,t,s){const i=t.clientURL;if(!s||!t||!i)return!1;const r=W(i),n=e.id&&this.CO.supportsId()?e.id:void 0,a=this.CN.pop(r,n)||this.CN.getUnknownNavigateMetadata(i);return s.postMessage(a),!0}};pt=l([G("get-navigate-info")],pt);let gt=class{constructor(e,t,s,i,r){this.Cf=e,this.Cg=t,this.Ch=s,this.Ci=i,this.Cj=r}async handle(e,t){if(!this.Cd(t))return!1;const s=new URL(e.url);return await this.Ce(s,t.data),!0}Cd(e){return!!e&&"object"==typeof e&&e.data instanceof Array&&e.data.every(e=>"string"==typeof e.url)}async Ce(e,t){if(this.Cf.isEnabledOnURL(e.toString(),this.Ci.getCookies(e.toString())))return;if(!t.length)return;this.Ch.refreshCacheSketch();const s=p.fromNavigateURL(e.toString());for(const{url:i}of t){const t=this.Ci.getCookies(location.origin),r=!0,n=Ee.create(i,{navigation:s,cookies:t,prewarm:r}),a=n.url.origin!==e.origin;if(this.Cf.shouldCacheRequest(n,!0),await this.Cg.loadResponse(n),a&&this.Cf.shouldCacheRequest(n,!0)&&!await this.Cg.loadResponse(n))return void await this.Cj.fetch(n)}}};function mt(e,...t){return"object"==typeof e&&void 0===e.prototype&&t.every(t=>t in e)}gt=l([G("prewarm-fetch")],gt);let ft=class{constructor(e,t,s){this.CZ=e,this.Ca=t,this.Cb=s}async handle(e,t){return!!mt(t,"data")&&(await this.CY(t.data,mt(t,"event")?t.event:void 0),!0)}async CY(e,t){"load"===t&&(this.Ca.trackLoadEvent(),2===this.Ca.loadEventCount&&this.CZ.refreshCacheSketch(!0)),this.Cb.updateCookies(location.origin,e)}};ft=l([G("send-cookies")],ft);let wt=class{constructor(e){this.Cc=e}async handle(e){return e.id,this.Cc.reportDynamicBlocksApplied(e.id),!0}};wt=l([G("dom-ready")],wt);let vt=class{constructor(e){this.Cl=e}async handle(e,t){return!!mt(t,"data")&&(await this.Ck(t.data),!0)}async Ck(e){this.Cl.updateCustomDevice(e)}};vt=l([G("update-device")],vt);let yt=class{constructor(e,t){this.Cy=e,this.Cz=t}async handle(e,t,s){const i=t.clientURL;if(!s||!t)return!1;const r=W(i),n=e.id&&this.Cz.supportsId()?e.id:void 0,a=this.Cy.popOriginTimings(n||r);return s.postMessage(a),!0}};yt=l([G("get-origin-timings")],yt);let Ct=class{constructor(e){this.Cn=e}async handle(e,t){return!!this.Cm(t)&&(t.data,this.Cn.toggleBypassDeactivation(t.data),!0)}Cm(e){return!!e&&"object"==typeof e&&"boolean"==typeof e.data}};Ct=l([G("bypass-deactivation")],Ct);class St{constructor(e){this.swResponse=!0,this.url=e.url,this.resultingClientId=e.resultingClientId,this.fromOrigin=e.fromOrigin,this.cacheHit=e.cacheHit,this.cdnCacheHit=e.cdnCacheHit,this.cdnBackendTime=e.cdnBackendTime,this.cdnPoP=e.cdnPoP,this.firstLoad=!1,this.splitTestId=e.splitTestId,this.group=e.group,this.responseCause=e.responseCause,this.responseSource=e.responseSource.toString(),this.backendCacheHit=e.backendCacheHit,[this.browser,this.browserVersion]=I(navigator.userAgent),e.originStatus&&(this.originStatus=e.originStatus),e.timings&&(this.timings=e.timings),e.disconnectCause&&(this.disconnectCause=e.disconnectCause)}static fromContext(e,t,s,i,r){const n=e.request,a=t&&r?r.status:null,o=r?new Ve(r.headers):null,c=!!o&&o.isBackendCacheHit(),h=o?o.getPoP():null,u=e.disconnectCause?e.disconnectCause:null;return new St({fromOrigin:t,splitTestId:s,group:i,originStatus:a,responseSource:e.source,url:n.originalRequest.url,resultingClientId:n.resultingClientId,cacheHit:e.source===$e.SwCache,timings:n.timings,cdnCacheHit:o?o.getCache():null,cdnBackendTime:o?o.getDuration():null,cdnPoP:h,responseCause:e.cause,backendCacheHit:c,disconnectCause:u})}}class bt{constructor(e){this.Aq=[],this.Ar=e}addItem(e,t){this.Aq.length>=this.Ar&&this.Aq.shift(),this.Aq.push({navigationKey:e,item:t})}popItem(e){for(const t of this.Aq)if(t.navigationKey===e)return this.Aq.splice(this.Aq.indexOf(t),1),t.item;return null}}class Rt{constructor(){this.promise=new Promise(e=>{this.resolver=e})}resolve(e){this.resolver(e)}}const At=new class{constructor(){this.A5=null,this.A5=this.A4()}get(e){return(t=this.A3(),s=B,i=(t=>t.get(e)),je(t,s,"readonly",i)).then(e=>e.result||null);var t,s,i}set(e,t){return ze(this.A3(),B,s=>s.put(t,e)&&void 0)}clear(){return Promise.all([(e=this.A3(),t=B,ze(e,t,e=>e.clear()).then(()=>void 0))]).then(()=>void 0);var e,t}disconnect(){return this.A5?this.A5.then(e=>{this.A5=null,e.close()}):Promise.resolve()}A3(){return this.A5||(this.A5=this.A4()),this.A5}A4(){const e=indexedDB.open(A,1);return e.onupgradeneeded=(t=>{const{oldVersion:s}=t,{result:i}=e;s<1&&i.createObjectStore(B)}),this.openRequest(e).then(e=>(e.onclose=(()=>{this.A5=null}),e.onerror=(()=>{this.A5=null}),e.onversionchange=(t=>{t.newVersion||(this.A5=null,e.close())}),e))}openRequest(e){return new Promise((t,s)=>{e.onsuccess=(()=>t(e.result)),e.onerror=(()=>s(e.error)),e.onblocked=(()=>s(e.error))})}},Bt=new class{constructor(e,t,s){this.C$=[],this.C8=e,this.C9=t.open(s)}async store(e){if("function"!=typeof e.cachePath)throw new TypeError("Cannot store an object without cachePath method.");const t=e.cachePath(),s=e.toJSON();await this.C8.set(t,s),location.origin}async load(e,t=!1){if("function"!=typeof e.cachePath)throw new TypeError("Cannot store an object without cachePath method.");const s=e.cachePath(),i=await this.C8.get(s);if(null!=i)return void e.fromJSON(i);const r=await this.C9,n=await async function(e,t,s=!1){const i=await e.match(`${location.origin}${t}`);if(!i){const e=`Could not load object "${location.origin}${t}" from cache.`;if(s)throw new Error(e);return null}const r=i.statusText;try{return te(r)}catch(e){const i=`Object at "${t}" is not in JSON format.`;if(s)throw new Error(i);return r}}(r,s,t);null!==n&&(e.fromJSON(n),await this.C8.set(s,n))}async loadAllWatched(){await this.loadAll(...this.C$)}async loadAll(...e){await Promise.all(e.map(e=>{const t=!!e.cachePath&&e.cachePath()===k;return this.load(e,t)}))}watch(...e){for(const t of e)this.C$.push(t),t.observe(()=>this.store(t))}}(At,caches,A),kt=new Pe(At),Dt=new class{constructor(e){this.Cr=new Map,this.Cq=e}capture(e,t){t.url;const s=this.Cq.getRequestKey(e),i=this.Cr.get(s)||[];i.push(t),this.Cr.set(s,i)}pop(e,t){const s=t||e,i=this.Cr.get(s);if(!i||!i.length)return null;1===i.length&&this.Cr.delete(s);const r=i.findIndex(t=>W(t.url)===e);return-1!==r?i.splice(r,1)[0]:i.shift()}getUnknownNavigateMetadata(e){return new St({url:e,resultingClientId:"",fromOrigin:!0,cacheHit:!1,timings:null,cdnCacheHit:null,cdnBackendTime:null,cdnPoP:null,backendCacheHit:!1,originStatus:null,splitTestId:this.Cq.getSplitTestId(),group:this.Cq.getGroup(),responseSource:$e.Origin,responseCause:T.Unknown})}}(kt),qt=new Y,Ot=new X(kt),Nt=new ie,xt=new se,It=new class{constructor(e){this.swCacheKeys=new WeakMap,this.BG=e}async getSWCacheKey(e){if(this.swCacheKeys.has(e))return this.swCacheKeys.get(e);const{url:t}=e,s=await this.BG.getQueryParameterStripConditions(e);for(const e of Array.from(t.searchParams.keys()))(this.BG.shouldStripQueryParameter(e,s)||e===O||e===N)&&t.searchParams.delete(e);const i=W(t.toString());return this.swCacheKeys.set(e,i),i}}(kt),Pt=new class{constructor(e,t,s,i){this.assetAPIKeys=new WeakMap,this.BC=e,this.BD=t,this.BE=s,this.BF=i}async getAssetAPIKey(e){if(this.assetAPIKeys.has(e))return this.assetAPIKeys.get(e);const t=await this.BD.getSWCacheKey(e),s=new URL(t),i=await this.BC.getImageOptions(e),r=e=>{if(!1!==e)for(const t of g(e))if(s.searchParams.has(t)){s.searchParams.delete(t);break}};!1!==i&&(r(i.overrideWidth),r(i.overrideHeight));const n=s.toString();return this.assetAPIKeys.set(e,n),n}async createAssetAPIRequest(e){const t=await this.getAssetAPIKey(e);if(t.startsWith(this.BC.appURL))return new URL(t);const s=new URL(t),i=e.getVariation(this.BC);i&&"desktop"!==i&&s.searchParams.append("bqvariation",i),this.BC.shouldBypassDeactivation()&&s.searchParams.append("bqpass","1");const r=this.BE.getAndResetCount();this.A_(s,r),await this.BA(e,s);const n=new URL(`${this.BC.appURL}/asset/${s}`);return e.url,y(e,n),n}A_(e,t){0!==t&&e.searchParams.append("bqpi",t.toString())}async BA(e,t){const{request:s}=e;if(s.destination,e.contentType!==n.Image)return;if(".svg"===r(t.pathname))return;const i=await this.BC.getImageOptions(e);if(!1!==i){const s=new URL(e.originalRequest.url).searchParams,r=v(this.BB(e,t.pathname,s,i));r.length&&(t.searchParams.append("bqoptimize","1"),t.search+=`;${r.join(";")}`)}}BB(e,t,s,i){const{width:r,dpr:n}=this.BF,a=(o=e.headers.get("width")||void 0,c=(e=>parseInt(e,10)),null===o?null:void 0!==o?c(o):void 0);var o,c;return Object.assign({},i,{screenWidth:r,screenDPR:n,clientHintWidth:a,pathname:t,searchParams:s})}}(kt,It,xt,Nt),Ft=new class{constructor(e,t,s){this.Q=e,this.R=t,this.S=s}async delete(){await async function(e){const t=(await caches.keys()).filter(e).map(e=>caches.delete(e));await Promise.all(t)}(e=>e.startsWith(A)&&e.endsWith(this.Q.getClientRevision())),this.Q.getClientRevision()}async loadResponse(e){const t=this.N(e);return await caches.match(await this.S.getSWCacheKey(e),{cacheName:t})}async storeResponse(e,t){const s=this.N(e),i=await this.S.getSWCacheKey(e);await this.putIntoCache(s,i,t)}async putIntoCache(e,t,s){const i=await caches.open(e);this.Q.getClientRevision(),await this.L(i,t,s.clone())}async L(e,t,s,i=!1,r=!1){try{await e.put(t,s)}catch(a){return r?this.M("cacheErrorAfterCleanAssets",a):i?(this.M("cacheErrorAfterCleanImages",a),await this.O(Object.keys(n)),this.L(e,t,s,!0,!0)):(this.M("cacheError",a),await this.O([n.Image]),this.L(e,t,s.clone(),!0,!1))}}M(e,t){return Ne(this.R.appURL,{action:e,label:`${t.message}`,value:`${Date.now()}`})}N(e){const t=e.getVariation(this.R)||"assets";return`${A}-${t}-${this.Q.getClientRevision()}`}async O(e){e.join(", ");const t=(await caches.keys()).filter(e=>new RegExp(`^${A}-.*`).test(e));return(await Promise.all(t.map(async t=>{const s=await caches.open(t);return this.P(s,e)}))).reduce((e,t)=>e+t,0)}async P(e,t){const s=(await e.keys()).filter(e=>{const s=a(e);return-1!==t.indexOf(s)});return(await Promise.all(s.map(t=>e.delete(t)))).filter(e=>e).length}}(Ot,kt,It),Et=new class{constructor(e,t,s){this.loading=!1,this.disconnected=!1,this.shuttingDown=!1,this.reconnectAttempt=0,this.disconnectCause=M.None,this.BR=e,this.BS=t,this.BT=s}isDisconnected(){return this.disconnected}setDisconnectCause(e){this.disconnectCause=e}getDisconnectCause(){return this.disconnectCause}async purge(){this.BR.purge(),await this.BN()}refreshCacheSketch(e=!1){return e||this.BR.isExpired()?this.BN():(this.BR.getDrift(),Promise.resolve())}connect(){this.reconnectAttempt=0,this.disconnected=!1}async BM(){this.disconnected=!0,this.shuttingDown=!0,await registration.unregister()}disconnect(e=!0,t,s=!1){if(this.disconnected=!0,this.setDisconnectCause(t),!e||this.shuttingDown)return;if(s)return void F(this.BS.reconnectInterval).then(()=>this.BN());const i=Math.min(this.BS.reconnectInterval*Math.pow(5,this.reconnectAttempt),216e5);this.reconnectAttempt+=1,F(i).then(()=>this.BN())}async BN(){if(navigator.onLine&&!this.loading){this.loading=!0;try{await this.BO()}catch(e){this.disconnect(!0,M.BloomfilterException)}finally{this.loading=!1}}}async BO(){const e=this.BP(),t=await fetch(e);if(t.status!==R.OK)return t.status===R.Forbidden?(t.status,this.setDisconnectCause(M.ServerError),this.BM()):(t.status,this.disconnect(!0,M.BloomfilterException));const s=function(e=null){if(!e)return new Map;const t=e.split(";").map(e=>e.split("=",2));return new Map(t)}(t.headers.get(D));if(!this.BS.shouldBypassDeactivation()&&"true"===s.get("disabled"))return this.disconnect(!0,M.DashboardDisabled);const r=this.BR.getClientRevision(),n=s.get("cachingId")||null,a=this.BR.getServerRevision(),o=(c=r,h=a,null===(u=n)||null===h?c:u===h?c:u);var c,h,u;o!==r&&await this.BT.delete(),this.shuttingDown||(this.reconnectAttempt=0,this.disconnected=!1);const l=Date.now(),d=l+this.BS.refreshInterval,p=l-E(t);await async function(e,t,s){const r=t.headers.get(i);if(!r.startsWith("application/json"))throw new Error(`Weird server reply: ${r}`);const n=await t.json();e.clearRevalidationWhitelist(),e.update(Object.assign({},s,{body:n}))}(this.BR,t,{maxAge:d,drift:p,serverRevision:n,clientRevision:o})}BP(){const t={[e]:"application/json"},s=new URL(this.BQ());return s.searchParams.append("BCB","1"),s.searchParams.append("skversion","2.4.1"),new Request(s.toString(),{headers:t})}BQ(){return`${this.BS.appURL}/bloomfilter`}}(Ot,kt,Ft),Ut=new class{constructor(e,t,s,i){this.BI=e,this.BJ=t,this.BK=s,this.BL=i}async isResponseValid(e,t){const s=await this.BL.getAssetAPIKey(e);return!this.BI.isResponseStale(s,e.contentType,t)&&!this.isCachedResponseExpired(t)&&this.BH(e,t)}async canTakeFromCache(e){if(this.BI.isInvalid())return e.markAsCacheMiss(J.InvalidCacheSketch),!1;if(e.isNavigateRequest()){if("reload"===e.request.cache)return e.request.cache,e.markAsCacheMiss(J.ReloadCacheMode),this.BJ.purge(),!1;"no-cache"===e.request.cache&&(e.request.cache,this.BJ.refreshCacheSketch(!0))}const t=!this.BI.isRequestStale(await this.BL.getAssetAPIKey(e));return t||e.markAsCacheMiss(J.UrlInCacheSketch),t}async trackRevalidation(e){this.BI.addToRevalidationWhitelist(await this.BL.getAssetAPIKey(e))}isCachedResponseExpired(e){const t=H(e,this.BI.getDrift());if(null!==t)return t;const s=function(e){const t=e.headers.get("expires");return t?(Date.now(),Date.now()>Date.parse(t)):null}(e);return null!==s&&s}BH(e,t){return!(t.url&&!h(e,this.BK.relativeModuleImports)&&(t.url,e.url.toString(),t.url.includes("/v1/asset/")))}}(Ot,Et,kt,Pt),Lt=new class{constructor(){this.requestHandlers=new Set}addHandler(e){this.requestHandlers.add(e)}fetch(e){try{const t=this.requestHandlers.values(),s=this.Bx(e,t);return s instanceof Promise?s.catch(t=>(t.message,Xe(e,!0,T.Error))):s}catch(t){return t.message,Xe(e,!0,T.Error)}}Bx(e,t){const{done:s,value:i}=t.next();return s?Xe(e,!0,T.Error):i.supportsHandling(e)?(i.constructor.name,i.handle(e,e=>(i.constructor.name,this.Bx(e,t)))):this.Bx(e,t)}},Ht=new class{constructor(e,t){this.Co=e,this.Cp=t}async executeFor(t){const{navigation:s}=t,i=await this.Co.getCriticalResources(t);let r=t;for(const n of i){const i=new Headers;for(const[s,r]of t.originalRequest.headers)s.toLocaleLowerCase()!==e&&i.append(s,r);const a={navigation:s,dependsOn:r,headers:i,critical:!0},o=t.createSubRequest(n,a);t.waitUntil(Promise.resolve(this.Cp.fetch(o))),r=o}}}(kt,Lt),Mt=new it(Et,kt),Tt=new class extends Te{constructor(e,t,s,i,r,n){super(Je.INSTALLING),this.AG=e,this.cookieStore=t,this.AH=s,this.AI=i,this.AJ=r,this.AK=n,this.AL=[],this.AG.addEventListener("fetch",e=>this.y(e)),this.AG.addEventListener("message",e=>e.waitUntil(this.AA(e))),this.AG.addEventListener("push",e=>this.v(e)),this.AG.addEventListener("notificationclick",e=>this.w(e)),this.AG.addEventListener("error",e=>this.AE(e)),this.AG.addEventListener("unhandledrejection",e=>this.AF(e))}run(){this.transition(Je.RUNNING)}fail(e){this.transition(Je.FAILED,e)}install(e){this.AG.addEventListener("install",t=>{t.waitUntil(this.s(e))})}async s(e){await this.waitUntil(Je.FAILED,Je.RUNNING),this.state===Je.RUNNING&&await this.t(e),this.skipWaitingUntilActive()}claimClients(){this.AG.addEventListener("activate",e=>e.waitUntil(this.AG.clients.claim()))}pushHandler(e){this.AH.addHandler(e)}pushMessage(e){this.AL.push(e)}async watch(e,t,s,i,r){return this.AJ.watch(e,t,s,i,r)}async load(){try{await this.AJ.loadAllWatched(),this.AI.preloadBloomFilter&&this.AK.refreshCacheSketch(),this.run()}catch(e){this.AK.setDisconnectCause(M.SWException),e.message,this.fail(e.message)}}async skipWaitingUntilActive(){this.AG.skipWaiting(),await F(500);const e=this.AG.registration.installing||this.AG.registration.waiting||this.AG.registration.active;if(e&&"activated"!==e.state)return this.skipWaitingUntilActive()}async t(e){const t=[];for(const s of e.getPrecache()){const e=this.u(s).catch(e=>void 0);t.push(e)}await Promise.all(t)}async u(e){const t=Ee.create(e,{precache:!0});try{(await this.AH.fetch(t)).source}catch(e){}}v(e){if(!e.data)return;const t=e.data.json();if(t.isBaqend){const{title:s}=t;t.data.isBaqend=t.isBaqend,e.waitUntil(registration.showNotification(s,t))}}w(e){const{action:t,notification:s}=e;if(!s.data.isBaqend)return;const i=s.data.closeNotification;"close"!==t?(e.waitUntil(this.x(s.data.launchUrl)),i&&setTimeout(s.close.bind(s),1e4)):s.close()}async x(e){if(e)return clients.openWindow(e);const t=await clients.matchAll();return t.length>0?t[0].focus():clients.openWindow("/")}y(e){if(e.request.url,!this.AC(e.request))return;const t=Ee.fromEvent(e);t.mark("eventStart"),this.state!==Je.FAILED?this.state!==Je.RUNNING?this.$(e,t):this.z(e,t):this._(t)}z(e,t){t.cookies=this.cookieStore.getCookies(location.origin);const s=this.AH.fetch(t);return this.AD(Promise.resolve(s)),s instanceof Promise?e.respondWith(s.then(e=>e.response?(e.request,e.response):(e.request,e.request.fetchOriginal()))):s.response?(s.request,void e.respondWith(s.response)):void s.request}$(e,t){e.request.url,e.respondWith(this.waitUntil(Je.RUNNING,Je.FAILED).then(e=>{if(e===Je.FAILED)return this._(t),t.fetchOriginal();t.cookies=this.cookieStore.getCookies(location.origin);const s=Promise.resolve(this.AH.fetch(t));return this.AD(s),s.then(e=>e.response||e.request.fetchOriginal())}))}_(e){e.request.url,e.isNavigateRequest()&&(e.request.url,this.load())}async AA(e){if(await this.waitUntil(Je.RUNNING,Je.FAILED),this.state===Je.FAILED)return this.AB(e,this.reason);const t=e.source;e.data;for(const s of this.AL)if(await s.handle(t,e.data,e.ports?e.ports[0]:void 0))return;e.data,await this.AB(e,"No message handler could handle.")}async AB(e,t){if(e.ports&&e.ports.length)return e.data.type===x?this.load():void e.ports[0].postMessage({reason:t,applicationState:this.state})}AC(e){if(!function(e){return e.url.startsWith("https")}(e))return e.url,!1;if("same-origin"===e.mode)return e.url,!1;if("only-if-cached"===e.cache)return e.url,!1;const t=a(e);return[n.Audio,n.Video,n.PDF].includes(t)?(e.url,!1):!e.headers.has("Range")||(e.url,!1)}async AD(e){const t=await e;if(t.response&&t.source===$e.Origin&&t.cause!==T.Fetchlist&&!await t.isSuccessful())try{const e=this.AI.appURL,s=await t.response;if(!s.status)return;Ne(e,{action:"originError",label:`${s.url}`,value:`${s.status}`})}catch(e){}}AE(e){if(!We(`${e.error}`))try{Ne(this.AI.appURL,{action:"swError",label:`${e.error}`,value:`${Date.now()}`})}catch(e){}}AF(e){if(!We(`${e.reason}`))try{Ne(this.AI.appURL,{action:"swRejection",label:`${e.reason}`,value:`${Date.now()}`})}catch(e){}}}(self,qt,Lt,kt,Bt,Et);const Jt=new class{constructor(){this.p=new bt(3),this.q=new bt(3),this.r=new Map}popDynamicBlockResponse(e){return this.p.popItem(e)}setDynamicBlockPreload(e,t){this.p.addItem(e,t)}createDynamicBlockRequest(e,t=!1){const s=Object.assign({},e.originalRequest,{credentials:"include"});t&&(s.redirect="follow");const i=e.createSubRequest(e.originalRequest.url,s);ot(i,e.originalRequest.headers);const r=F(0).then(()=>i.fetch());return Xe(i,!0,T.DynamicBlockPreload,r)}setOriginTimings(e,t,s){this.q.addItem(e,{requestStart:t,responseStart:s})}popOriginTimings(e){return this.q.popItem(e)||{responseStart:-1,requestStart:-1}}async waitForDynamicBlocks(e,t=!1){const s=this.r.get(e);if(s)return s.promise;if(t)return;const i=new Rt;return this.r.set(e,i),i.promise}reportDynamicBlocksApplied(e){const t=this.r.get(e);t&&(t.resolve(),this.r.delete(e))}releaseOldClients(){this.r.forEach(async(e,t)=>{if(!await clients.get(t))return this.reportDynamicBlocksApplied(t)})}},$t=new class extends st{async handle(e,t){return this.B6(e)}supportsHandling(e){return e.url.pathname.endsWith("/speed-kit-safe-script.js")}B6(e){return et(e,"",{status:200,headers:{"content-type":"application/javascript","cache-control":"public, max-age=31536000"}},T.SafeScript)}},Wt=new class extends st{constructor(e){super(),this.CG=e}async handle(e,t){const s=e.navigation.clientId;return e.url,await this.CG.waitForDynamicBlocks(s),this.CF(e)}supportsHandling(e){return e.url.pathname.endsWith("/speed-kit-dom-ready.js")}CF(e){return et(e,"",{status:200,headers:{"content-type":"application/javascript","cache-control":"max-age=0, no-cache, no-store",vary:"*"}},T.Delayed)}}(Jt),jt=new class extends st{constructor(e,t,s,i,r){super(),this.ignoreNextNavigate=!1,this.loadEvents=0,this.B1=e,this.B2=t,this.B3=s,this.B4=i,this.B5=r}get loadEventCount(){return this.loadEvents}trackLoadEvent(){this.loadEvents+=1}handle(e,t){if(this.B4.releaseOldClients(),this.loadEvents=0,this.B5.navigationPreload&&e.preloadResponse&&!this.B5.shouldCacheRequest(e))return async function(e){const t=e.preloadResponse;if(!t)throw new TypeError("The request needs to have a Navigation Preload response.");const s=await t;return s?(e.markAsFetched(),new _e($e.Origin,T.NavigationPreload,e,Promise.resolve(s))):Xe(e,!0,T.NavigationPreload)}(e).then(e=>this.B0(e));if(!e.modifying&&this.ignoreNextNavigate)return this.ignoreNextNavigate=!1,this.B0(Xe(e,!0,T.IgnoredAfterPOSTNavigate));this.ignoreNextNavigate=e.modifying&&this.B5.ignoreAfterPostNavigate;const s=t(e);return s instanceof Promise?s.then(e=>this.B0(e)):this.B0(s)}supportsHandling(e){return e.isNavigateRequest()}B0(e){const{request:t}=e;return at(e),e.cause===T.NavigationPreload&&e.waitUntil(this.B1.executeFor(t)),e}}(Ht,Dt,Et,Jt,kt),zt=new class extends st{constructor(e,t,s){super(),this.CC=e,this.CE=t,this.CD=s}handle(e,t){if(!this.CC.preloadDynamicBlocks)return e.waitUntil(this.CB(e)),t(e);const s=this.CA(e),i=Date.now(),r=this.B_(s),n=this.B_(t(e));return this.B7(e,n,r,i),this.B8(e,r,n)}supportsHandling(e){return e.isNavigateRequest()}B7(e,t,s,i){e.waitUntil(Promise.all([t,s.then(()=>{const t=Date.now(),s=this.CC.getRequestKey(e);return this.CE.setOriginTimings(s,i,t),this.B$()})]))}B8(e,t,s){return Promise.race([t,s]).then(async i=>{const r=i.source!==$e.Origin,n=await i.isSuccessful(),a=await i.isRedirect();if(this.B9(t,s),r&&n&&!a)return i;const o=await t;return await o.isSuccessful()?o:this.CD.retryOrigin(e,!1)})}async B9(e,t){const s=await t;if(!await s.isServerError())return;const i=await e;await i.isServerError()||this.CD.disconnect(M.ServerError)}async B$(){if(this.CC.navigationPreload)return F(6e4)}async B_(e,t=0){const s=await e;return Date.now(),await s.response,t&&await F(t),s}CA(e){let t;t=this.CC.navigationPreload&&e.preloadResponse?e.preloadResponse.then(t=>t&&t.url===e.originalRequest.url?Xe(e,!0,T.DynamicBlockPreload,t):this.CE.createDynamicBlockRequest(e)):Promise.resolve(this.CE.createDynamicBlockRequest(e));const s=this.CC.getRequestKey(e);return this.CE.setDynamicBlockPreload(s,t),t}async CB(e){if(await this.CC.shouldFetchOrigin(e.request)){await F(1e3*Ie);try{const t=e.createSubRequest(e.originalRequest.url,Object.assign({},e.originalRequest,{credentials:"include"}));ot(t),await t.fetch()}catch(e){e.stack}}}}(kt,Jt,Mt),Gt=new class extends st{constructor(e){super(),this.requestsInflightToPromiseMap=new Map,this.By=e}async handle(e,t){const s=await this.By.getSWCacheKey(e),i=this.requestsInflightToPromiseMap.get(s);if(i){const s=await i;return s.source!==$e.SwCache||e.isCritical()?s.clone(e):t(e)}const r=e.url.searchParams.has(N);if(!e.isCritical()&&!r)return t(e);const n=Promise.resolve(t(e));this.requestsInflightToPromiseMap.set(s,n);const a=await n;return a.source!==$e.SwCache&&a.cause!==T.CacheHit||this.requestsInflightToPromiseMap.delete(s),a}async removeFromInflightList(e){const t=await this.By.getSWCacheKey(e);this.requestsInflightToPromiseMap.delete(t)}supportsHandling(e){return!0}}(It),Kt=new class extends st{constructor(e,t,s,i,r,n){super(),this.D=e,this.E=t,this.F=s,this.G=i,this.H=r,this.I=n}handle(e,t){!this.G.isDisconnected()&&this.I.isEnabledOnURL(e.originalRequest.url,e.cookies)&&this.H.increment();const s=t(e);return s instanceof Promise?s.then(t=>this.A(e,t)):this.A(e,s)}supportsHandling(e){return e.isNavigateRequest()}A(e,t){const s=this.G.isDisconnected();return this.G.getDisconnectCause()&&(t.disconnectCause=this.G.getDisconnectCause()),s&&this.H.getAndResetCount(),this.B(e,t)}B(e,t){return t.waitUntil(this.C(e,t)),t}async C(e,t){const s=await t.response;s&&Qe(s)||this.D.capture(e,St.fromContext(t,t.source===$e.Origin,this.I.getSplitTestId(),this.I.getGroup(),s))}}(Dt,jt,Jt,Et,xt,kt);Tt.pushHandler(Kt),Tt.pushHandler(jt),Tt.pushHandler($t),Tt.pushHandler(Wt),Tt.pushHandler(new class extends st{constructor(e){super(),this.CI=e}handle(e,t){e.url;const s=e.fetch();return new _e($e.Origin,T.Fetchlist,e,s)}supportsHandling(e){return this.CI.shouldEnsureFetch(e)&&!e.isCritical()}}(kt)),Tt.pushHandler(new rt(kt,Jt)),Tt.pushHandler(new class extends st{constructor(e,t){super(),this.Br=e,this.Bs=t}handle(e,t){e.url;const s=Xe(e,!0,T.Disconnected);return s.setDisconnectCause(this.Br.getDisconnectCause()),s}supportsHandling(e){return navigator.onLine&&this.Br.isDisconnected()&&!this.Bs.shouldBypassDeactivation()}}(Et,kt)),Tt.pushHandler(new class extends st{constructor(e,t){super(),this.Bd=e,this.Be=t}handle(e,t){return e.url,e.isNavigateRequest()&&e.waitUntil(this.Bd.executeFor(e)),Xe(e,!0,T.Blacklist)}supportsHandling(e){return!e.prewarm&&!this.Be.shouldCacheRequest(e,e.isPrecache())&&!this.Be.shouldDelayRequest(e)}}(Ht,kt)),Tt.pushHandler(new class extends st{constructor(e,t){super(),this.CJ=e,this.CK=t}handle(e,t){e.mark(this.CJ);const s=t(e);return e.waitUntil(Promise.resolve(s).then(async e=>{await e.response,e.request.mark(this.CK)})),s}supportsHandling(e){return!0}}("handleStart","handleEnd")),Tt.pushHandler(new class extends st{constructor(e,t){super(),this.CL=e,this.CM=t}async handle(e,t){e.url;const s=t(e),i=await s;let r=await i.response;r||(r=await e.fetchOriginal());const n=new Headers(r.headers);n.set("timing-allow-origin","*"),n.set("cache-control","max-age=0, no-cache, no-store"),n.set("vary","*");const a=Ke(r,{headers:n});return await this.CM.waitForDynamicBlocks(e.navigation.clientId,!0),new _e(i.source,i.cause,e,a)}supportsHandling(e){return this.CL.shouldDefer(e)}}(kt,Jt)),Tt.pushHandler(new class extends st{constructor(e){super(),this.Bn=e}handle(e,t){const{url:s}=e;return s.searchParams.get(O)?(s.searchParams.delete(O),y(e,s),e.url=s,this.Bn.shouldCacheRequest(e)?t(e):Xe(e,!1,T.Blacklist,e.fetch())):Promise.resolve().then(async()=>await this.Bn.isEnabledOnSite(e)?this.Bj(e,t):t(e))}supportsHandling(e){return this.Bn.shouldDelayRequest(e)}async Bj(e,t){return e.contentType===n.Script?(e.url.toString(),this.Bk(e)):e.contentType===n.Image?(e.url.toString(),this.Bl(e)):(e.url.toString(),t(e))}Bk(e){const t=e.url;t.searchParams.append(O,"1"),y(e,t);const s=this.Bn.getDelayOptions(e);return et(e,`(function(){\n  const thisNode = document.currentScript;\n  const parentNode = thisNode.parentNode;\n  function loadScript() {\n    const scr = document.createElement('script');\n    for (let i = 0, len = thisNode.attributes.length; i < len; i++) {\n      var attr = thisNode.attributes.item(i);\n      scr.setAttribute(attr.nodeName, attr.nodeValue);\n    }\n    scr.async = true;\n    scr.src = '${t}';\n    // Check if original script was removed from DOM\n    if (thisNode.parentNode) {\n      parentNode.replaceChild(scr, thisNode);\n    } else {\n      // Remove delayed script if original script was removed from DOM\n      scr.onload = function() { parentNode.removeChild(scr); };\n      parentNode.appendChild(scr);\n    }\n  }\n  function delayAfter(cb) { ${s.event===De.SPEED_KIT_DYNAMIC_LOADED?"\n      if (!document.documentElement.classList.contains('speed-kit-dynamic-loading')) {\n        return cb();\n      }\n      document.addEventListener('speed-kit-loaded', () => {\n        cb();\n      });":"\n      if (document.readyState === 'complete') {\n        return cb();\n      }\n      document.addEventListener('readystatechange', () => {\n        if (document.readyState === 'complete') {\n          cb();\n         }\n      });"} }\n  delayAfter(() => {\n    window.setTimeout(() => {\n      loadScript();\n    }, ${s.timeout});\n  });\n})();\n`,this.Bm("application/javascript; charset=utf-8"),T.Delayed)}Bl(e){const t=Uint8Array.from([71,73,70,56,57,97,1,0,1,0,128,0,0,0,0,0,255,255,255,33,249,4,1,0,0,0,0,44,0,0,0,0,1,0,1,0,0,2,1,68,0,59]);return F(1e3).then(()=>e.fetchOriginal()).catch(console.error),et(e,t,this.Bm("image/gif"),T.Delayed)}Bm(e){return{headers:{[i]:e}}}}(kt)),Tt.pushHandler(new class extends st{constructor(e){super(),this.Bi=e}handle(e,t){return Oe(this.Bi.isEnabledOnSite(e),s=>s?t(e):Xe(e,!0,T.Disabled))}supportsHandling(e){return!e.prewarm&&!e.isPrecache()}}(kt)),Tt.pushHandler(new class extends st{constructor(e){super(),this.Bz=e}handle(e,t){return e.url,e.waitUntil(this.Bz.refreshCacheSketch()),t(e)}supportsHandling(e){return!0}}(Et)),Tt.pushHandler(zt),Tt.pushHandler(Gt),Tt.pushHandler(new class extends st{constructor(){super(...arguments),this.CH=new ct}async handle(e,t){const s=t(e),i=await s,r=await i.response;return at(i)&&r&&Qe(r)?this.resolvePossibleLoop(e,i,r):(this.CH.clear(),i)}resolvePossibleLoop(e,t,s){if(this.CH.addRedirect(e.originalRequest,s)){const t=e.fetchOriginal();return t.then(()=>this.CH.clear()),e.markAsFetched(),new _e($e.Origin,T.LoopDetected,e,t)}return t}supportsHandling(e){return e.isNavigateRequest()}}),Tt.pushHandler(new class extends st{constructor(e,t,s,i){super(),this.CU=e,this.CV=t,this.CX=i,this.CW=s}async handle(e,t){const s=await this.CP(e);if(s)return s;e.url,e.isNavigateRequest()&&this.CS(e);const i=await t(e);if(!navigator.onLine&&i.cause===T.Error){const t=await this.CP(e);if(t)return t}return this.CQ(e,i)}supportsHandling(e){return!0}async CP(e){e.mark("cacheStart");const t=await this.CU.loadResponse(e);if(e.mark("cacheEnd"),t){const s=this.CT(t);if(s&&s.immutable||this.CX.isImmutable(e))return e.url,Ze(e,!0,T.Immutable,t)}return t?(e.url,e.isCritical()?Ze(e,!0,T.CriticalResource,t):navigator.onLine?await this.CV.isResponseValid(e,t)?await this.CV.canTakeFromCache(e)?(e.url,Ze(e,!0,T.CacheHit,t)):null:(e.markAsCacheMiss(J.ExpiredResponse),null):(e.url,Ze(e,!0,T.Offline,t))):null}async CQ(e,t){return this.CX.cachingDisabled||!t.response?(e.url,await this.CW.removeFromInflightList(e),t):(e.waitUntil(this.CR(e,t)),t)}async CR(e,t){try{const s=await t.response;s&&nt(t.source)&&s.status<400&&s.status>=200&&(await this.CU.storeResponse(e,s.clone()),await this.CV.trackRevalidation(e))}catch(t){e.url,t.message}await this.CW.removeFromInflightList(e)}async CS(e){e.getCauseForCacheMiss()===J.UrlInCacheSketch&&(await this.CU.loadResponse(e)||e.markAsCacheMiss(J.CacheMiss))}CT(e){const t=U.fromString(e.headers.get(q)||"");return t||null}}(Ft,Ut,Gt,kt)),Tt.pushHandler(new class extends st{constructor(e,t,s){super(),this.Bu=e,this.Bv=t,this.Bw=s}handle(e,t){return e.waitUntil(this.Bt(e)),t(e)}supportsHandling(e){return e.isNavigateRequest()}async Bt(e){if(!this.Bw.hasCriticalResources())return;const t=await this.Bv.loadResponse(e);t||await this.Bu.executeFor(e)}}(Ht,Ft,kt)),Tt.pushHandler(new class extends st{constructor(e){super(),this.Bg=e;const[t,s]=I(navigator.userAgent);this.Bh=!("Chrome"===t&&s<64||"Firefox"===t&&s<61)}async handle(e,t){const s=await this.Bf(e);return s?Xe(e,!0,T.CacheHit,s):t(e)}supportsHandling(e){return this.Bh&&e.isSameOrigin()&&!e.isNavigateRequest()&&!e.isPrecache()}async Bf(e){const t=e.originalRequest.url;try{const e=await fetch(t,{mode:"same-origin",cache:"only-if-cached"});if(!this.Bg.isCachedResponseExpired(e))return e}catch(e){}return null}}(Ut)),Tt.pushHandler(new class extends st{constructor(e,t,s){super(),this.BZ=e,this.Ba=t,this.Bb=s,this.Bc=new it(t,e)}async handle(e){e.url=await this.Bb.createAssetAPIRequest(e);const t=await this.BU(e);return t.status===R.BaqendRedirect?this.BV(e,t):t.status>=R.BadRequest||t.status<R.OK?this.BW(e,t):this.BY(e,t)}supportsHandling(e){return!0}async BU(e){try{return e.mode=this.BX(e),e.cache="no-cache",e.url,e.request.cache,await e.fetch()}catch(e){this.Ba.setDisconnectCause(M.SWException);const t=e instanceof TypeError?R.FetchTypeError:R.BadGateway;return new Response(e.message,{status:t})}}async BV(e,t){const s=he(new URL(e.originalRequest.url),t.headers.get("location")),i=await this.BZ.appendStrippedParams(new URL(s),e),r=Ee.create(i);if(!this.BZ.shouldCacheRequest(r)){if(e.url,r.url,this.BZ.preloadDynamicBlocks)return Xe(e,!0,T.Blacklist);const t=e.fetchOriginal();return Xe(e,!1,T.Blacklist,t)}const n=new Ve(t.headers),a=new Headers(t.headers);return a.set("location",i),et(e,null,{headers:a,status:R.MovedTemporarily,statusText:t.statusText},e.getCauseForCacheMiss(),n.getResponseSource())}async BW(e,t){return e.isCritical()?Ye(e,!0,T.Error):t.status>=R.InternalServerError?this.Bc.handleInternalServerError(e):(t.status,Xe(e,!0,T.ClientError))}BX(e){return e.isSameOrigin()?"same-origin":e.request.headers.has("origin")||e.request.url.startsWith(this.BZ.appURL.toLowerCase())?"cors":"no-cors"}BY(e,t){return h(e,this.BZ.relativeModuleImports)?(e.url,Ye(e,!1,e.getCauseForCacheMiss(),t)):Ke(t).then(t=>(Object.defineProperty(t,"url",{value:e.originalRequest.url.toString()}),e.url,Ye(e,!1,e.getCauseForCacheMiss(),t)))}}(kt,Et,Pt)),Tt.pushMessage(new pt(Dt,kt)),Tt.pushMessage(new ut(Et)),Tt.pushMessage(new lt(Et)),Tt.pushMessage(new dt(Et)),Tt.pushMessage(new gt(kt,Ft,Et,qt,Lt)),Tt.pushMessage(new ft(Et,jt,qt)),Tt.pushMessage(new wt(Jt)),Tt.pushMessage(new vt(kt)),Tt.pushMessage(new yt(Jt,kt)),Tt.pushMessage(new Ct(kt)),Tt.install(kt),Tt.claimClients(),Tt.watch(kt,qt,Ot,xt,Nt).then(()=>Tt.load());